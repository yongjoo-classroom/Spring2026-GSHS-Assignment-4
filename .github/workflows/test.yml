      - name: Run tests (robust)
        run: |
          echo "PWD:"
          pwd
          echo "Repo tree (top):"
          ls -la

          echo "Tracked test files:"
          git ls-files "test_*.py" || true

          TEST_FILES=$(git ls-files "test_*.py")
          if [ -z "$TEST_FILES" ]; then
            echo "ERROR: No tracked test_*.py files found."
            echo "All python files tracked:"
            git ls-files "*.py" || true
            echo "Find python files (maxdepth 4):"
            find . -maxdepth 4 -type f -name "*.py" -print || true
            exit 1
          fi

          echo "Running pytest on:"
          echo "$TEST_FILES"
          python -m pytest -q $TEST_FILES

